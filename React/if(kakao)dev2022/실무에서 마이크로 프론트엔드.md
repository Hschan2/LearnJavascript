# 마이크로 프론트엔드는 실무에서 사용하기 괜찮을까?

## 마이크로 프론트엔드 구조를 적용해야 하는 때
다양한 서비스가 하나의 이름으로 합쳐진 것도 다른 이름으로 분리가 된 것도 존재한다면 연동 시 문제가 발생하는 경우가 있다.   

각 기능마다 관리자가 달라 생긴 문제가 있을 때 말이다.   

배포 주기의 문제도 존재한다.   
워크보드 어드민(순수 웹 서비스)는 언제든비 배포가 가능하다. 어드민이 합쳐져 있을 때는 내부의 심사를 기다려야 하는 문제가 발생한다.   

그리고 Dependency의 업데이트를 대응할 때도 생각해야 한다.   

서비스의 신규 기능을 개발하거나 코드의 리팩토링 또는 최신화를 할 경우에 프로젝트를 분리하는 것을 생각해 볼 필요가 있다.   

## 그래서 어떻게 해야 할까?
우선 부분적으로 나누어서 순차적으로 진행을 하는 것을 고려해야 한다.   

구조를 분리하여 어떻게 진행해야 할 지 고려해야 한다.   

카카오 팀은 ```npm + webpack```으로 빌드를 진행했다가 구조를 분리하고 나서 ```pnpm + turborepo + vite```를 사용해서 빌드를 진행하는 것을 선택했다. 이러한 결과로 빠른 속도로 빌드를 할 수 있게 됐다. 그리고 공통 컴포넌트 등 공통적으로 사용하는 것을 각각 패키지화를 하여 분리된 샌드박스에 넣어 다른 빌드 도구를 사용하는 것이 가능하도록 수정했다.   

### 서버 사이드 라우팅
각각 서비스가 분리된 구조에 놓여 서버 사이드 라우팅이 가능해졌다. 각 서비스를 런타임 시 통합하도록 하여 보다 빠른 배포가 가능하도록 하였다.   

단, 주의해야 할 것은 컨테이너다. 사용자가 다른 출력 화면을 보는 등 다른 시간에 배포를 할 때 등 문제가 발생할 수 있다. 이럴 때, ```웹 컴포넌트 + 워크스페이스 환경 앱```처럼 나누어서 문제를 개선할 수 있다.   

웹 컴포넌트는 장점이 몇 가지 있다.   
* 프레임워크로부터 독립적으로 다양한 프레임워크 사용 가능
* Prop 설정 가능하여 부모 서비스 앱과 자유로운 통신 가능
* 이미 빌드된 상태로 런타임에 바로 사용 가능
* 앱과 관계없이 업데이트 가능
* Children 소유 가능   

예시 코드.   
```
app.tsx / app.vue / app.svelte

<work-container routes={devRoutes}>
    <WorkSpace />
</work-container>
```

## 중요한 것들
<b>속도</b>가 있다. 개발 속도와 빠르다는 것이다. 그러나 설계가 오래 걸리고 한 번 정착한 구조를 변경하기 어렵다. 그래서 처음부터 마이크로로 진행했다면 더욱 어려웠을 것이다.   

그래서 서비스가 더 커질 경우에 고려하는 것이 좋다.   

그리고 로딩 속도가 느려진다. 앱들이 모두 독립되어 있어 Dependency가 모두 다르다는 것이다. 그래서 불필요한 로딩이 많아질 수 있다.   

예를 들어, 관리자 서비스가 있다. 관리자 서비스는 로딩 속도보다는 피처의 딜리버리 속도가 중요하다.   

다음으로 <b>늙지 않는 코드</b>가 있다. 오래된 코드를 한 번에 모두 바꾸는 것은 굉장히 어렵다. 만약 코드가 분리가 되어 있다면 시간이 날 때마다 업데이트를 할 수 있다. 그래서 유지보수가 가능해진다.   

그래서 현재 서비스의 상황을 제대로 고려해서 마이크로 개발을 고려해야 한다.   

[실무에서의 마이크로 프론트엔드](https://www.youtube.com/watch?v=DOS0YPwdnhk)